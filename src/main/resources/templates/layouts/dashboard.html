<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      style="height: 100%;">
<head>
    <meta charset="UTF-8">
    <title>Mi Aplicaci√≥n</title>
    <link rel="icon" href="/images/logo_nuevo_795.jpg" type="image/jpg">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <th:block th:replace="~{fragments/estilos :: estilos}"></th:block>
    <script>
        const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
        if (isCollapsed) {
            document.documentElement.classList.add('sidebar-collapsed');
        }
    </script>
</head>
<body>

    <div id="app-container">
        <div th:insert="~{fragments/navbar.html}"></div>

        <div id="main-container">
            <div th:insert="~{fragments/sidebar.html}"></div>
            <div class="content-wrapper">
                <div th:insert="~{fragments/toast.html}"></div>

                <!-- Contenido principal -->
                <main layout:fragment="content"></main>
            </div>

        </div>

        <!-- Footer -->
        <div th:insert="~{fragments/footer.html}"></div>
    </div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggleBtn = document.getElementById('toggle-sidebar');
        const sidebar = document.querySelector('.sidebar');

        // Cargar estado guardado
        if(localStorage.getItem('sidebarCollapsed') === 'true') {
            sidebar.classList.add('collapsed');
        }

        // Manejar clic
        toggleBtn?.addEventListener('click', () => {
            const isCollapsed = sidebar.classList.toggle('collapsed');
            localStorage.setItem('sidebarCollapsed', isCollapsed);
        });
    });
</script>
<th:block th:replace="~{fragments/scripts :: scripts}"></th:block>

</body>
</html>